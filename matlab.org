#+TITLE: Tikz - Matlab Figures
#+PROPERTY: header-args:latex  :headers '("\\usepackage{tikz}" "\\usepackage{import}" "\\import{/home/tdehaeze/gdrive/These/LaTeX/ressources/}{config.tex}")
#+PROPERTY: header-args:latex+ :imagemagick t :fit yes
#+PROPERTY: header-args:latex+ :iminoptions -scale 100% -density 150
#+PROPERTY: header-args:latex+ :imoutoptions -quality 100
#+PROPERTY: header-args:latex+ :results raw replace :buffer no
#+PROPERTY: header-args:latex+ :eval no-export
#+PROPERTY: header-args:latex+ :exports both
#+PROPERTY: header-args:latex+ :mkdirp yes
#+PROPERTY: header-args:latex+ :output-dir Figures
#+PROPERTY: header-args:latex+ :noweb yes

* Bode Plot
#+NAME: tikz_bode_size
#+begin_src latex :exports none
  \setlength\fwidth{8cm}
  \setlength\fheight{6cm}
#+end_src

#+NAME: tikz_bode_colors
#+begin_src latex :exports none
  \definecolor{mycolor1}{rgb}{0.00000,0.44700,0.74100}%
  \definecolor{mycolor2}{rgb}{0.85000,0.32500,0.09800}%
#+end_src

#+NAME: tikz_bode_magnitude
#+begin_src latex :exports none
  \addplot [color=mycolor1, line width=1.5pt, forget plot]
    table[row sep=crcr]{%
  0.1	1.01005052873657e-07\\
  0.128264983052806	1.01664238347834e-07\\
  0.157107238924745	1.02517695956018e-07\\
  0.18546769230847	1.03543636061298e-07\\
  0.212974853574552	1.04725774956534e-07\\
  0.240093487686065	1.06083315937259e-07\\
  0.265720110532451	1.07553965841416e-07\\
  0.291383170483279	1.09223773462052e-07\\
  0.316592411198352	1.11072024230127e-07\\
  0.340825854742345	1.13060269199475e-07\\
  0.366914237840249	1.15454859622654e-07\\
  0.391374560198038	1.17963974550842e-07\\
  0.417465528925313	1.20953756477538e-07\\
  0.441209286319119	1.23988591817282e-07\\
  0.466303492974274	1.27562172337219e-07\\
  0.488302208687789	1.31043396989907e-07\\
  0.511338753841433	1.35083892060969e-07\\
  0.535462089927361	1.39808093979064e-07\\
  0.555577622239888	1.44187757047341e-07\\
  0.576448828292587	1.49216449197161e-07\\
  0.598104096238093	1.55032397307927e-07\\
  0.620572880677651	1.61815365865146e-07\\
  0.643885742724043	1.69803432886319e-07\\
  0.668074391569561	1.79318537556468e-07\\
  0.686810358899529	1.87718941885277e-07\\
  0.706071771413778	1.97478996911421e-07\\
  0.725873365081725	2.08934985167263e-07\\
  0.746230289139112	2.22541868839743e-07\\
  0.76715811767793	2.38929534513711e-07\\
  0.788672861561414	2.58993349110218e-07\\
  0.810790980673169	2.84045018015197e-07\\
  0.833529396509819	3.16073078442216e-07\\
  0.856905505126836	3.58208099339588e-07\\
  0.872852662384837	3.94319713913011e-07\\
  0.889096598952917	4.39418310048772e-07\\
  0.905642837944528	4.96738301746698e-07\\
  0.922497005259217	5.70680118773582e-07\\
  0.948368186628591	7.23378101472975e-07\\
  0.97496491834841	9.14860409076252e-07\\
  0.983995229627825	9.67251819477798e-07\\
  0.993109181374978	9.97547357125844e-07\\
  1.00230754828386	9.96743010500109e-07\\
  1.01159111222383	9.63386381678171e-07\\
  1.02096066230605	9.04786666900937e-07\\
  1.03996091395412	7.56868523480497e-07\\
  1.08902296226373	4.64070707821975e-07\\
  1.11956431948388	3.60989211186348e-07\\
  1.15096220088503	2.90308142269697e-07\\
  1.18324062745838	2.39733809801162e-07\\
  1.21642429385737	2.02103721732557e-07\\
  1.25053858729039	1.73173820830104e-07\\
  1.29751716865759	1.43753473898242e-07\\
  1.34626057929891	1.21456206706951e-07\\
  1.39683511798874	1.04041347072373e-07\\
  1.46273335620113	8.70561677245899e-08\\
  1.53174046370208	7.3823296245619e-08\\
  1.60400310705682	6.32685991114584e-08\\
  1.69523234155412	5.31658703720422e-08\\
  1.7916503273639	4.511566666412e-08\\
  1.91109062168914	3.76203098714079e-08\\
  2.05737431343292	3.08841170918377e-08\\
  2.21485523372636	2.5576277331862e-08\\
  2.40647515001542	2.08581556863818e-08\\
  2.63889081445751	1.67636761748707e-08\\
  2.92055551218275	1.32825838792378e-08\\
  3.29243733300778	1.01681750577945e-08\\
  3.78074666359936	7.53026237778049e-09\\
  4.4222739805059	5.39833929379632e-09\\
  5.31772317785097	3.67599283795859e-09\\
  6.63470812109234	2.33489255322155e-09\\
  8.66837993001979	1.35925822658613e-09\\
  11.5361810173648	7.676334948205e-10\\
  15.0722530931076	4.52763007284615e-10\\
  18.979216428391	2.89145267853717e-10\\
  22.822244741869	2.03291827168405e-10\\
  26.6947849403432	1.51675173384983e-10\\
  30.3726357970332	1.19920044358967e-10\\
  33.9258338274099	9.86491871630121e-11\\
  37.2023668141307	8.43064217124126e-11\\
  40.420958397963	7.35957661734579e-11\\
  43.5149650092505	6.55814252813243e-11\\
  46.4158883361277	5.95969649904407e-11\\
  49.0558370636505	5.51607108319502e-11\\
  51.8459354389291	5.13188855736818e-11\\
  54.2918617761894	4.85492150629342e-11\\
  56.8531791387375	4.61612842410678e-11\\
  58.9889642550849	4.45247114551215e-11\\
  61.2049837247669	4.3136089606988e-11\\
  62.9214610961035	4.22634257944522e-11\\
  64.6860766154632	4.15433654255139e-11\\
  66.5001803043113	4.0986537260153e-11\\
  68.3651600451024	4.060788984234e-11\\
  69.6374473062824	4.04644006797995e-11\\
  70.9334120498799	4.04171783357981e-11\\
  72.2534949178722	4.04761939215881e-11\\
  73.5981447526576	4.06539073016312e-11\\
  74.9678187496688	4.09659765237643e-11\\
  76.3629826128226	4.1432223337971e-11\\
  77.7841107128648	4.20779654322652e-11\\
  79.2316862486626	4.29358813354861e-11\\
  80.7062014114952	4.40486596886297e-11\\
  82.2081575524054	4.54728172070248e-11\\
  83.7380653526651	4.72842704675161e-11\\
  85.2964449974102	4.95865306954824e-11\\
  86.8838263525119	5.2522711330237e-11\\
  88.5007491447346	5.62925600220678e-11\\
  90.1477631452492	6.11739456903102e-11\\
  91.825428356563	6.75386336323517e-11\\
  93.5343152029238	7.58122016297771e-11\\
  97.0480887738033	9.75050285011314e-11\\
  97.9469667069539	1.02207868495065e-10\\
  98.8541702191957	1.0496475501348e-10\\
  99.7697764236321	1.04745954424259e-10\\
  100.693863147603	1.01112531573306e-10\\
  101.6265089393	9.45659704129934e-11\\
  102.567793074442	8.62741368980795e-11\\
  104.476597156081	6.89561498779212e-11\\
  108.401435917833	4.33558260613239e-11\\
  111.441525146679	3.18045030672675e-11\\
  114.566872863487	2.41493700012586e-11\\
  117.779870119712	1.88532003294938e-11\\
  122.204468663149	1.40067199399389e-11\\
  126.795284678644	1.07049058134659e-11\\
  131.558562404571	8.35731897882944e-12\\
  137.765076954906	6.27407478287364e-12\\
  144.264395121816	4.80274437986494e-12\\
  152.469572701758	3.5548353344112e-12\\
  161.141427725302	2.67631206307887e-12\\
  171.883914281715	1.9549890058363e-12\\
  183.342548256229	1.44985706022044e-12\\
  197.376432630026	1.0465241697955e-12\\
  212.484535249889	7.66587152984097e-13\\
  228.74908173557	5.69262467421358e-13\\
  246.258591635054	4.28482075611431e-13\\
  262.675410372384	3.38076194747119e-13\\
  280.18665564592	2.69942560711011e-13\\
  296.122543798803	2.24999257717338e-13\\
  310.092663593192	1.95036826779225e-13\\
  324.721849207313	1.70672080658573e-13\\
  336.920570598027	1.54627584928265e-13\\
  349.577557436328	1.41284784727688e-13\\
  359.381366380463	1.32906118272708e-13\\
  369.460120519931	1.25851777651217e-13\\
  379.821530619074	1.20097397075732e-13\\
  386.890073932798	1.16991959510493e-13\\
  394.090164040345	1.14494029976136e-13\\
  401.424249049933	1.12640306013743e-13\\
  408.894822629486	1.11487839120606e-13\\
  412.682084570295	1.11199631536472e-13\\
  416.504424854519	1.11121024416085e-13\\
  420.362168384472	1.1126850341391e-13\\
  424.255643071779	1.11661767257977e-13\\
  428.185179865241	1.12324311350846e-13\\
  432.151112778976	1.13284107984235e-13\\
  436.153778920801	1.14574375434469e-13\\
  440.193518520888	1.16234399443078e-13\\
  444.270674960689	1.18310310932039e-13\\
  452.538627817017	1.23930947104228e-13\\
  460.960448682844	1.31936160639327e-13\\
  469.539001068005	1.42773466371377e-13\\
  482.707096560319	1.62956038192818e-13\\
  487.178021879464	1.68742467102871e-13\\
  491.690357762802	1.72044134200457e-13\\
  496.244487762891	1.71206100011912e-13\\
  500.840798984821	1.65121012127176e-13\\
  505.479682119125	1.5403448503362e-13\\
  510.161531474984	1.39562066890147e-13\\
  519.655724382766	1.08471186264396e-13\\
  544.171428686589	5.50909738623764e-14\\
  559.432570616939	3.82623001963885e-14\\
  575.121707184161	2.74804925851138e-14\\
  596.727119597331	1.84062818230755e-14\\
  619.144175597783	1.27595362608463e-14\\
  648.353428605471	8.35601181594322e-15\\
  678.94068126961	5.62778241229263e-15\\
  717.556091893692	3.59735662730521e-15\\
  765.391938823016	2.19244991010911e-15\\
  823.978568452851	1.27731194488163e-15\\
  895.265712599642	7.12173204970696e-16\\
  990.822809900379	3.57302849323114e-16\\
  1000	3.35937795382532e-16\\
  };
#+end_src

#+NAME: tikz_bode_phase
#+begin_src latex :exports none
  \addplot [color=mycolor1, line width=1.5pt, forget plot]
    table[row sep=crcr]{%
  0.1	-0.585601064905518\\
  0.105687597118478	-0.619628825914162\\
  0.111698681846778	-0.655724245390388\\
  0.118051652856874	-0.694029491749404\\
  0.124765955263093	-0.734699478450352\\
  0.131862140139479	-0.777903503894834\\
  0.139361927422416	-0.823827174596204\\
  0.147288272390749	-0.872674670558354\\
  0.155665435927102	-0.924671425914994\\
  0.164519058775359	-0.980067315862982\\
  0.173876240021636	-1.0391404639854\\
  0.183765620038826	-1.10220181386245\\
  0.194217468148908	-1.16960064765965\\
  0.205263775270926	-1.24173128529685\\
  0.214947467343796	-1.30577577763495\\
  0.22508800520954	-1.37370795579091\\
  0.235706941399663	-1.44585520211319\\
  0.246826845225555	-1.52258611749778\\
  0.258471350746971	-1.60431760317897\\
  0.270665207003335	-1.69152345201712\\
  0.283434330615137	-1.7847448345737\\
  0.296805860866562	-1.88460318157286\\
  0.310808217386903	-1.99181612171435\\
  0.325471160553176	-2.1072173489834\\
  0.340825854742331	-2.23178159119783\\
  0.356904934567502	-2.36665626815102\\
  0.370312667587014	-2.4828854433307\\
  0.384224084605523	-2.60739515066649\\
  0.398658107358057	-2.74113164492763\\
  0.413634368406335	-2.8851984657428\\
  0.429173237842218	-3.04089063126111\\
  0.445295850994262	-3.20973811392588\\
  0.462024137175122	-3.39356167095661\\
  0.479380849508895	-3.59454532051535\\
  0.497389595878983	-3.81533154379201\\
  0.51607487103856	-4.05914796629634\\
  0.535462089927392	-4.32997834052367\\
  0.550478980785524	-4.55377561999677\\
  0.565917016324646	-4.79810514003321\\
  0.58178800743451	-5.06605034637653\\
  0.598104096238105	-5.36134964693332\\
  0.614877765381008	-5.68857925790275\\
  0.632121847581245	-6.05340064075671\\
  0.649849535446982	-6.46290068205354\\
  0.668074391569548	-6.92606763955354\\
  0.68681035889951	-7.45447015003947\\
  0.706071771413749	-8.06324731079229\\
  0.725873365081689	-8.77258826592498\\
  0.739381991917545	-9.31453983515803\\
  0.75314201659739	-9.92383920629095\\
  0.767158117677977	-10.6139422273858\\
  0.781435060784497	-11.4020954690469\\
  0.795977700231537	-12.310747700855\\
  0.810790980673203	-13.3696282222522\\
  0.825879938784456	-14.6188798129297\\
  0.841249704973636	-16.113904071126\\
  0.856905505126854	-17.9330647520985\\
  0.872852662384851	-20.1902926611568\\
  0.889096598952924	-23.0562937335866\\
  0.905642837944531	-26.7950044768757\\
  0.914031074875622	-29.1142594893694\\
  0.922497005259214	-31.8262617130614\\
  0.931041348706901	-35.0244721728628\\
  0.939664831495459	-38.8265126973884\\
  0.948368186628579	-43.3767506392141\\
  0.95715215389917	-48.8429750073261\\
  0.966017479952245	-55.3985051469009\\
  0.983995229627797	-72.1828424116478\\
  1.03041699495054	-121.007683944629\\
  1.04959323055817	-134.153385331785\\
  1.06912633917342	-143.296206102742\\
  1.08902296226366	-149.722177640607\\
  1.10928986489529	-154.379248568372\\
  1.12993393803328	-157.868198479396\\
  1.15096220088509	-160.56206024178\\
  1.17238180328665	-162.696841977735\\
  1.19420002813357	-164.426384759835\\
  1.2164242938574	-165.854160883782\\
  1.23906215694794	-167.051850426395\\
  1.26212131452257	-168.070455976825\\
  1.28560960694331	-168.947144569586\\
  1.30953502048267	-169.709581677913\\
  1.33390569003905	-170.378752105711\\
  1.37131471775393	-171.24205455362\\
  1.40977287162893	-171.971867250948\\
  1.44930957412617	-172.59722794289\\
  1.48995507285279	-173.139361933188\\
  1.531740463702	-173.614131627261\\
  1.57469771464299	-174.033622711757\\
  1.61885969017829	-174.407200906616\\
  1.66426017648598	-174.742233881181\\
  1.71093390726908	-175.044595526303\\
  1.75891659032778	-175.319025263633\\
  1.80824493487798	-175.569388668235\\
  1.87617469143913	-175.871193203036\\
  1.94665634334225	-176.141921292783\\
  2.01978575681984	-176.386412634229\\
  2.09566239948036	-176.60855033443\\
  2.17438947559998	-176.811486072943\\
  2.25607406649673	-176.997804665904\\
  2.34082727617843	-177.169646220649\\
  2.42876438246056	-177.328798093309\\
  2.52000499376417	-177.476765005265\\
  2.63889081445755	-177.647920721433\\
  2.76338529005317	-177.805672691731\\
  2.8937530190509	-177.951755391976\\
  3.03027108286629	-178.087620024066\\
  3.17322963473482	-178.214491316245\\
  3.32293251639919	-178.333411299365\\
  3.47969790388786	-178.445273412754\\
  3.67760910160114	-178.5712708189\\
  3.8867766908927	-178.689356703259\\
  4.1078408899656	-178.800509802411\\
  4.34147833005496	-178.905574092765\\
  4.58840412645453	-179.005284139836\\
  4.89428989611481	-179.115701927187\\
  5.22056752784716	-179.220607469685\\
  5.62017384808323	-179.334761105806\\
  6.05036787939111	-179.443790394653\\
  6.57382014340928	-179.561475797552\\
  7.2087150337825	-179.687448417441\\
  8.05203967082557	-179.833964710821\\
  9.6824661193026	-180.072885043935\\
  11.430311291145	-180.2894838101\\
  12.6503372039588	-180.425855581263\\
  13.8720978054155	-180.554259065696\\
  15.0722530931083	-180.674636564922\\
  16.2259528707813	-180.786406165768\\
  17.3076553419573	-180.888590172482\\
  18.4614694632451	-180.995531574809\\
  19.6922025547908	-181.107932794239\\
  21.0049824165405	-181.226578169822\\
  22.1996611912005	-181.333912050653\\
  23.4622884814232	-181.447111782565\\
  24.7967289250217	-181.566888681098\\
  26.2070669648381	-181.694053038532\\
  27.6976193503679	-181.82953598333\\
  29.0043049386384	-181.949566596592\\
  30.372635797035	-182.076841043571\\
  31.8055201533307	-182.212186256817\\
  33.3060034362469	-182.356558026473\\
  34.8772747481423	-182.511069274134\\
  36.5226736430817	-182.677026029854\\
  38.2456972246693	-182.855973679635\\
  40.0500075787347	-183.049757076629\\
  41.5545533471868	-183.216944413854\\
  43.1156199031796	-183.396395721899\\
  44.7353305449872	-183.589708594335\\
  46.4158883361298	-183.798780638677\\
  48.159579101925	-184.025884529313\\
  49.9687745385497	-184.27376672133\\
  51.8459354389293	-184.545778998577\\
  53.7936150398065	-184.846056323752\\
  55.8144624945484	-185.179761149202\\
  57.3797641421395	-185.455841602198\\
  58.9889642550825	-185.757772827911\\
  60.6432939540775	-186.089706613532\\
  62.3440188862748	-186.456747518603\\
  64.0924401935684	-186.865242457342\\
  65.8898955080028	-187.323182211861\\
  67.7377599751802	-187.840768520426\\
  69.6374473062844	-188.431231708416\\
  71.5904108596503	-189.112037161101\\
  73.5981447526585	-189.906712714266\\
  74.9678187496691	-190.515289035365\\
  76.3629826128223	-191.201305212334\\
  77.7841107128642	-191.980957163711\\
  79.2316862486613	-192.87523909213\\
  80.7062014114933	-193.91182621681\\
  82.2081575524031	-195.127895682969\\
  83.738065352662	-196.574460573766\\
  85.2964449974067	-198.323211863111\\
  86.8838263525077	-200.477633167929\\
  88.5007491447295	-203.191577328587\\
  90.1477631452436	-206.701064705568\\
  91.8254283565686	-211.379140901239\\
  92.6759330114743	-214.331932052743\\
  93.5343152029291	-217.826598766441\\
  94.400647894181	-221.994042213006\\
  95.2750047242777	-226.991400733951\\
  96.1574600143255	-232.992868556016\\
  97.0480887738072	-240.159592580042\\
  98.8541702191994	-258.141084291823\\
  102.567793074445	-298.061856900427\\
  104.476597156082	-312.41966618711\\
  106.420924406474	-322.461404046981\\
  108.401435917834	-329.487540489865\\
  110.418805085416	-334.545312646028\\
  112.473717836474	-338.311188250259\\
  114.566872863485	-341.205025589303\\
  116.698981861712	-343.49078368342\\
  118.870769771187	-345.339192096529\\
  121.0829750232	-346.864206451554\\
  123.336349791372	-348.144216589308\\
  125.631660247406	-349.234651546846\\
  127.969686821587	-350.175682988232\\
  130.351224468143	-350.997070642768\\
  132.777082935551	-351.721295363698\\
  136.500780654609	-352.662187859789\\
  140.328908478593	-353.465831512801\\
  144.264395121821	-354.163026445831\\
  148.310251433614	-354.776243806059\\
  152.469572701759	-355.322268715471\\
  156.74554102056	-355.813903660489\\
  161.141427725301	-356.261099018824\\
  167.194975973196	-356.801600414255\\
  173.475935923388	-357.29146693271\\
  179.99285067824	-357.741867917736\\
  188.484340903368	-358.262617305634\\
  197.376432630036	-358.749002140954\\
  210.534524276677	-359.392804176501\\
  224.569799553979	-360.015651450881\\
  };
#+end_src

#+begin_src latex :file tikz_bode.png :exports both
  <<tikz_bode_size>>
  <<tikz_bode_colors>>
  \begin{tikzpicture}
  \begin{axis}[%
    width=\fwidth,
    height=0.45\fheight,
    at={(0\fwidth,0.5\fheight)},
    scale only axis,
    separate axis lines,
    every outer x axis line/.append style={black},
    every x tick label/.append style={font=\color{black}},
    every x tick/.append style={black},
    xmode=log,
    xmin=0.1,
    xmax=1000,
    xticklabels={{}},
    xminorticks=true,
    every outer y axis line/.append style={black},
    every y tick label/.append style={font=\color{black}},
    every y tick/.append style={black},
    ymode=log,
    ymin=1e-14,
    ymax=1e-06,
    ytick={1e-14, 1e-12, 1e-10, 1e-8, 1e-6},
    % yticklabels={{1e-14}, {}, {1e-10}, {}, {1e-6}},
    yminorticks=true,
    ylabel={Amplitude},
    axis background/.style={fill=white},
    xmajorgrids,
    xminorgrids,
    ymajorgrids,
    yminorgrids
  ]
  <<tikz_bode_magnitude>>
  \end{axis}

  \begin{axis}[%
    width=\fwidth,
    height=0.45\fheight,
    at={(0\fwidth,0\fheight)},
    scale only axis,
    separate axis lines,
    every outer x axis line/.append style={black},
    every x tick label/.append style={font=\color{black}},
    every x tick/.append style={black},
    xmode=log,
    xmin=0.1,
    xmax=1000,
    xminorticks=true,
    xlabel={Frequency [Hz]},
    every outer y axis line/.append style={black},
    every y tick label/.append style={font=\color{black}},
    every y tick/.append style={black},
    ymin=-360,
    ymax=0,
    ytick={-360, -270, -180, -90, 0, 90},
    ylabel={Phase [deg]},
    axis background/.style={fill=white},
    xmajorgrids,
    xminorgrids,
    ymajorgrids,
    legend style={at={(0.01,0.02)}, anchor=south west, legend cell align=left, align=left, draw=black}
  ]
  <<tikz_bode_phase>>
  \end{axis}
  \end{tikzpicture}
#+end_src

#+RESULTS:
[[file:Figures/tikz_bode.png]]
* Regular plot
